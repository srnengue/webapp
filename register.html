<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„É¶„Éº„Ç∂„ÉºÁôªÈå≤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .register-container {
            background: white;
            border-radius: 20px;
            padding: 50px 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 100%;
        }

        .register-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .register-icon {
            font-size: 64px;
            margin-bottom: 15px;
        }

        .register-title {
            font-size: 28px;
            color: #333;
            margin-bottom: 8px;
        }

        .register-subtitle {
            font-size: 14px;
            color: #666;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .required {
            color: #f5576c;
            margin-left: 3px;
        }

        .form-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            font-family: inherit;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
            background: #f8f9ff;
        }

        .form-input.error {
            border-color: #f5576c;
            background: #fff5f7;
        }

        .form-input.success {
            border-color: #28a745;
            background: #f0fff4;
        }

        .error-message {
            color: #f5576c;
            font-size: 13px;
            margin-top: 6px;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        .success-message {
            color: #28a745;
            font-size: 13px;
            margin-top: 6px;
            display: none;
        }

        .success-message.show {
            display: block;
        }

        .password-wrapper {
            position: relative;
        }

        .toggle-password {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            font-size: 20px;
            color: #999;
            transition: color 0.3s;
        }

        .toggle-password:hover {
            color: #667eea;
        }

        .password-strength {
            margin-top: 10px;
        }

        .strength-label {
            font-size: 13px;
            color: #666;
            margin-bottom: 5px;
        }

        .strength-bar {
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
        }

        .strength-fill {
            height: 100%;
            width: 0;
            transition: all 0.3s;
            border-radius: 3px;
        }

        .strength-weak {
            width: 33%;
            background: #f5576c;
        }

        .strength-medium {
            width: 66%;
            background: #ffa500;
        }

        .strength-strong {
            width: 100%;
            background: #28a745;
        }

        .form-help {
            font-size: 12px;
            color: #999;
            margin-top: 5px;
        }

        .terms-checkbox {
            display: flex;
            align-items: start;
            gap: 10px;
            margin-bottom: 25px;
        }

        .terms-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            margin-top: 2px;
        }

        .terms-text {
            font-size: 14px;
            color: #666;
            line-height: 1.6;
        }

        .terms-link {
            color: #667eea;
            text-decoration: none;
        }

        .terms-link:hover {
            text-decoration: underline;
        }

        .register-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .register-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .register-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .register-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .register-btn span {
            position: relative;
            z-index: 1;
        }

        .register-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .login-link-container {
            text-align: center;
            margin-top: 25px;
            font-size: 14px;
            color: #666;
        }

        .login-link {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
            margin-left: 5px;
        }

        .login-link:hover {
            text-decoration: underline;
        }

        .back-to-home {
            text-align: center;
            margin-top: 20px;
        }

        .back-link {
            color: #667eea;
            text-decoration: none;
            font-size: 14px;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .success-card {
            display: none;
            text-align: center;
        }

        .success-card.show {
            display: block;
        }

        .success-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .success-title {
            font-size: 24px;
            color: #333;
            margin-bottom: 15px;
        }

        .success-text {
            font-size: 14px;
            color: #666;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        @media (max-width: 480px) {
            .register-container {
                padding: 40px 25px;
            }

            .register-title {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="register-container">
        <div class="register-header">
            <div class="register-icon">üìù</div>
            <h1 class="register-title">Êñ∞Ë¶èÁôªÈå≤</h1>
            <p class="register-subtitle">„Ç¢„Ç´„Ç¶„É≥„Éà„Çí‰ΩúÊàê„Åó„Å¶„Ç¢„É≥„Ç±„Éº„Éà„Å´ÂõûÁ≠î</p>
        </div>

        <form id="registerForm" onsubmit="handleRegister(event)">
            <div class="form-group">
                <label class="form-label" for="username">„É¶„Éº„Ç∂„ÉºÂêç<span class="required">*</span></label>
                <input 
                    type="text" 
                    id="username" 
                    class="form-input" 
                    placeholder="„É¶„Éº„Ç∂„ÉºÂêç„ÇíÂÖ•Âäõ"
                    autocomplete="username"
                >
                <div class="error-message" id="usernameError"></div>
                <div class="form-help">3ÊñáÂ≠ó‰ª•‰∏ä„ÅÆÂçäËßíËã±Êï∞Â≠ó</div>
            </div>

            <div class="form-group">
                <label class="form-label" for="email">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ<span class="required">*</span></label>
                <input 
                    type="email" 
                    id="email" 
                    class="form-input" 
                    placeholder="example@email.com"
                    autocomplete="email"
                >
                <div class="error-message" id="emailError"></div>
            </div>

            <div class="form-group">
                <label class="form-label" for="password">„Éë„Çπ„ÉØ„Éº„Éâ<span class="required">*</span></label>
                <div class="password-wrapper">
                    <input 
                        type="password" 
                        id="password" 
                        class="form-input" 
                        placeholder="„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ"
                        autocomplete="new-password"
                    >
                    <button type="button" class="toggle-password" onclick="togglePassword('password')">
                        üëÅÔ∏è
                    </button>
                </div>
                <div class="error-message" id="passwordError"></div>
                <div class="password-strength" id="passwordStrength" style="display: none;">
                    <div class="strength-label">„Éë„Çπ„ÉØ„Éº„Éâ„ÅÆÂº∑Â∫¶: <span id="strengthText">Âº±„ÅÑ</span></div>
                    <div class="strength-bar">
                        <div class="strength-fill" id="strengthFill"></div>
                    </div>
                </div>
                <div class="form-help">8ÊñáÂ≠ó‰ª•‰∏ä„ÄÅËã±Â≠ó„Å®Êï∞Â≠ó„ÇíÂê´„ÇÄ</div>
            </div>

            <div class="form-group">
                <label class="form-label" for="passwordConfirm">„Éë„Çπ„ÉØ„Éº„ÉâÔºàÁ¢∫Ë™çÔºâ<span class="required">*</span></label>
                <div class="password-wrapper">
                    <input 
                        type="password" 
                        id="passwordConfirm" 
                        class="form-input" 
                        placeholder="„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÜçÂÖ•Âäõ"
                        autocomplete="new-password"
                    >
                    <button type="button" class="toggle-password" onclick="togglePassword('passwordConfirm')">
                        üëÅÔ∏è
                    </button>
                </div>
                <div class="error-message" id="passwordConfirmError"></div>
                <div class="success-message" id="passwordConfirmSuccess">‚úì „Éë„Çπ„ÉØ„Éº„Éâ„Åå‰∏ÄËá¥„Åó„Å¶„ÅÑ„Åæ„Åô</div>
            </div>

            <div class="terms-checkbox">
                <input type="checkbox" id="agreeTerms">
                <label for="agreeTerms" class="terms-text">
                    <a href="#" class="terms-link" onclick="showTerms(event)">Âà©Áî®Ë¶èÁ¥Ñ</a>„Å®<a href="#" class="terms-link" onclick="showPrivacy(event)">„Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº</a>„Å´ÂêåÊÑè„Åó„Åæ„Åô
                </label>
            </div>

            <button type="submit" class="register-btn" id="registerBtn">
                <span>ÁôªÈå≤„Åô„Çã</span>
            </button>
        </form>

        <div class="success-card" id="successCard">
            <div class="success-icon">‚úÖ</div>
            <div class="success-title">ÁôªÈå≤„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü</div>
            <div class="success-text">
                „ÅîÁôªÈå≤„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ<br>
                „Ç¢„É≥„Ç±„Éº„Éà„Å´ÂõûÁ≠î„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åó„Åü„ÄÇ
            </div>
            <button class="register-btn" onclick="goToUserPage()">
                <span>„Ç¢„É≥„Ç±„Éº„Éà‰∏ÄË¶ß„Å∏</span>
            </button>
        </div>

        <div class="login-link-container">
            Êó¢„Å´„Ç¢„Ç´„Ç¶„É≥„Éà„Çí„ÅäÊåÅ„Å°„ÅÆÊñπ„ÅØ<a href="user.html" class="login-link">„É≠„Ç∞„Ç§„É≥</a>
        </div>

        <div class="back-to-home">
            <a href="index.html" class="back-link">‚Üê „Éà„ÉÉ„Éó„Éö„Éº„Ç∏„Å´Êàª„Çã</a>
        </div>
    </div>

    <script>
        document.getElementById('password').addEventListener('input', function() {
            const password = this.value;
            const strengthContainer = document.getElementById('passwordStrength');
            const strengthFill = document.getElementById('strengthFill');
            const strengthText = document.getElementById('strengthText');

            if (password.length === 0) {
                strengthContainer.style.display = 'none';
                return;
            }

            strengthContainer.style.display = 'block';

            let strength = 0;
            if (password.length >= 8) strength++;
            if (password.match(/[a-z]/)) strength++;
            if (password.match(/[A-Z]/)) strength++;
            if (password.match(/[0-9]/)) strength++;
            if (password.match(/[^a-zA-Z0-9]/)) strength++;

            strengthFill.className = 'strength-fill';
            if (strength <= 2) {
                strengthFill.classList.add('strength-weak');
                strengthText.textContent = 'Âº±„ÅÑ';
            } else if (strength <= 3) {
                strengthFill.classList.add('strength-medium');
                strengthText.textContent = '‰∏≠Á®ãÂ∫¶';
            } else {
                strengthFill.classList.add('strength-strong');
                strengthText.textContent = 'Âº∑„ÅÑ';
            }
        });

        document.getElementById('passwordConfirm').addEventListener('input', function() {
            const password = document.getElementById('password').value;
            const passwordConfirm = this.value;
            const successMsg = document.getElementById('passwordConfirmSuccess');
            const errorMsg = document.getElementById('passwordConfirmError');

            if (passwordConfirm.length > 0) {
                if (password === passwordConfirm) {
                    this.classList.remove('error');
                    this.classList.add('success');
                    errorMsg.classList.remove('show');
                    successMsg.classList.add('show');
                } else {
                    this.classList.remove('success');
                    this.classList.add('error');
                    successMsg.classList.remove('show');
                    errorMsg.textContent = '„Éë„Çπ„ÉØ„Éº„Éâ„Åå‰∏ÄËá¥„Åó„Åæ„Åõ„Çì';
                    errorMsg.classList.add('show');
                }
            } else {
                this.classList.remove('error', 'success');
                errorMsg.classList.remove('show');
                successMsg.classList.remove('show');
            }
        });

        function handleRegister(event) {
            event.preventDefault();
            
            const username = document.getElementById('username').value.trim();
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            const passwordConfirm = document.getElementById('passwordConfirm').value;
            const agreeTerms = document.getElementById('agreeTerms').checked;
            
            clearErrors();
            
            let hasError = false;
            
            if (!username) {
                showError('username', '„É¶„Éº„Ç∂„ÉºÂêç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                hasError = true;
            } else if (username.length < 3) {
                showError('username', '„É¶„Éº„Ç∂„ÉºÂêç„ÅØ3ÊñáÂ≠ó‰ª•‰∏ä„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                hasError = true;
            } else if (!username.match(/^[a-zA-Z0-9]+$/)) {
                showError('username', '„É¶„Éº„Ç∂„ÉºÂêç„ÅØÂçäËßíËã±Êï∞Â≠ó„ÅÆ„Åø„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                hasError = true;
            }
            
            if (!email) {
                showError('email', '„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                hasError = true;
            } else if (!email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)) {
                showError('email', 'Ê≠£„Åó„ÅÑ„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                hasError = true;
            }
            
            if (!password) {
                showError('password', '„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                hasError = true;
            } else if (password.length < 8) {
                showError('password', '„Éë„Çπ„ÉØ„Éº„Éâ„ÅØ8ÊñáÂ≠ó‰ª•‰∏ä„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                hasError = true;
            } else if (!password.match(/[a-zA-Z]/) || !password.match(/[0-9]/)) {
                showError('password', '„Éë„Çπ„ÉØ„Éº„Éâ„ÅØËã±Â≠ó„Å®Êï∞Â≠ó„ÇíÂê´„ÇÄÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô');
                hasError = true;
            }
            
            if (!passwordConfirm) {
                showError('passwordConfirm', '„Éë„Çπ„ÉØ„Éº„ÉâÔºàÁ¢∫Ë™çÔºâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                hasError = true;
            } else if (password !== passwordConfirm) {
                showError('passwordConfirm', '„Éë„Çπ„ÉØ„Éº„Éâ„Åå‰∏ÄËá¥„Åó„Åæ„Åõ„Çì');
                hasError = true;
            }
            
            if (!agreeTerms) {
                alert('Âà©Áî®Ë¶èÁ¥Ñ„Å®„Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº„Å´ÂêåÊÑè„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                hasError = true;
            }
            
            if (hasError) return;
            
            const registerBtn = document.getElementById('registerBtn');
            registerBtn.disabled = true;
            registerBtn.innerHTML = '<span>ÁôªÈå≤‰∏≠...</span>';
            
            setTimeout(() => {
                const userData = {
                    username: username,
                    email: email,
                    createdAt: new Date().toISOString()
                };
                
                sessionStorage.setItem('userLoggedIn', 'true');
                sessionStorage.setItem('userData', JSON.stringify(userData));
                
                document.getElementById('registerForm').style.display = 'none';
                document.querySelector('.login-link-container').style.display = 'none';
                document.getElementById('successCard').classList.add('show');
            }, 1000);
        }

        function showError(fieldId, message) {
            const input = document.getElementById(fieldId);
            const errorElement = document.getElementById(fieldId + 'Error');
            
            input.classList.add('error');
            errorElement.textContent = message;
            errorElement.classList.add('show');
        }

        function clearErrors() {
            const inputs = document.querySelectorAll('.form-input');
            const errors = document.querySelectorAll('.error-message');
            
            inputs.forEach(input => input.classList.remove('error'));
            errors.forEach(error => error.classList.remove('show'));
        }

        function togglePassword(fieldId) {
            const passwordInput = document.getElementById(fieldId);
            const toggleBtn = passwordInput.nextElementSibling;
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleBtn.textContent = 'üôà';
            } else {
                passwordInput.type = 'password';
                toggleBtn.textContent = 'üëÅÔ∏è';
            }
        }

        function showTerms(event) {
            event.preventDefault();
            alert('Âà©Áî®Ë¶èÁ¥Ñ„ÅÆÂÜÖÂÆπ„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô„ÄÇ\nÔºà„Éá„É¢Áâà„ÅÆ„Åü„ÇÅÁúÅÁï•Ôºâ');
        }

        function showPrivacy(event) {
            event.preventDefault();
            alert('„Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº„ÅÆÂÜÖÂÆπ„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô„ÄÇ\nÔºà„Éá„É¢Áâà„ÅÆ„Åü„ÇÅÁúÅÁï•Ôºâ');
        }

        function goToUserPage() {
            window.location.href = 'user.html';
        }

        document.querySelectorAll('.form-input').forEach(input => {
            input.addEventListener('input', function() {
                if (this.classList.contains('error')) {
                    this.classList.remove('error');
                    const errorElement = document.getElementById(this.id + 'Error');
                    if (errorElement) {
                        errorElement.classList.remove('show');
                    }
                }
            });
        });
    </script>
</body>
</html>