<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é˜²ç½ã‚¯ã‚¤ã‚º - ã«ã’ã¾ã£ã—</title>
    <style>
        /* æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã«åˆã‚ã›ãŸå…±é€šã‚¹ã‚¿ã‚¤ãƒ« */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans', sans-serif;
            background: linear-gradient(135deg, #FF6B6B 0%, #FFB347 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            color: #333;
            margin-bottom: 5px;
        }

        .header p {
            color: #666;
            font-size: 16px;
        }

        /* --- ã‚¯ã‚¤ã‚ºå°‚ç”¨ã‚¹ã‚¿ã‚¤ãƒ« --- */
        .quiz-section {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .progress-bar {
            height: 8px;
            background: #eee;
            border-radius: 4px;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #FF6B6B 0%, #FFB347 100%);
            border-radius: 4px;
            transition: width 0.3s ease-out;
        }

        .question-text {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            padding: 10px;
            border-left: 5px solid #ff6b6b;
            background: #fffafa;
        }

        .answer-option {
            display: block;
            background: #f0f0f0;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
            font-size: 16px;
        }

        .answer-option:hover {
            background: #e0e0e0;
        }

        .answer-option.selected {
            background: #ffe0b2; /* Light Orange */
            border-color: #ff9800; /* Darker Orange */
        }
        
        .answer-option.correct {
            background: #c8e6c9; /* Light Green */
            border-color: #4CAF50; /* Green */
            font-weight: bold;
        }
        
        .answer-option.incorrect {
            background: #ffcdd2; /* Light Red */
            border-color: #F44336; /* Red */
        }

        .action-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        .action-buttons button {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        #nextBtn {
            background: #ff6b6b;
            color: white;
        }
        #nextBtn:hover {
            background: #e55a5a;
        }
        #nextBtn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        #prevBtn {
            background: #f0f0f0;
            color: #333;
        }

        /* --- çµæœç”»é¢ --- */
        #resultsScreen {
            display: none;
            text-align: center;
            padding: 40px;
        }
        
        #scoreDisplay {
            font-size: 48px;
            font-weight: bold;
            color: #1a237e;
            margin-bottom: 10px;
        }
        
        #resultMessage {
            font-size: 24px;
            color: #333;
            margin-bottom: 30px;
        }
        
        .result-actions button {
            background: #1a237e;
            color: white;
            margin: 0 10px;
        }
        
        .result-actions button:hover {
            background: #3949ab;
        }

        /* è§£èª¬ã‚¨ãƒªã‚¢ */
        .rationale {
            margin-top: 5px;
            padding: 10px;
            background: #f9f9f9;
            border-left: 4px solid #1a237e;
            font-size: 14px;
            color: #333;
            display: none; /* Initially hidden */
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>é˜²ç½çŸ¥è­˜ãƒ†ã‚¹ãƒˆ</h1>
            <p>ã‚¯ã‚¤ã‚ºã«æŒ‘æˆ¦ã—ã¦ã€é˜²ç½ãƒ»æ¸›ç½ã«é–¢ã™ã‚‹çŸ¥è­˜ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ï¼</p>
        </div>

        <div class="quiz-section" id="quizScreen">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div style="text-align: right; margin-bottom: 15px; font-size: 14px; color: #666;">
                <span id="currentQuestion">1</span> / <span id="totalQuestions">0</span> å•
            </div>

            <div id="questionContainer">
                </div>

            <div class="action-buttons">
                <button id="prevBtn" onclick="prevQuestion()" disabled>â† å‰ã¸</button>
                <button id="nextBtn" onclick="nextQuestion()">æ¬¡ã¸ â†’</button>
            </div>
        </div>
        
        <div class="quiz-section" id="resultsScreen">
            <h2 style="font-size: 30px; color: #ff6b6b; margin-bottom: 20px;">ã‚¯ã‚¤ã‚ºçµæœ</h2>
            <div id="scoreDisplay">0 / 0</div>
            <div id="resultMessage"></div>
            
            <div class="result-actions" style="margin-top: 40px;">
                <button onclick="restartQuiz()">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button>
                <button onclick="goBack()">ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</button>
            </div>
        </div>
        
        <button class="back-btn" onclick="goBack()" style="margin-top: 25px; display: block; width: 100%; background: #1a237e; color: white; padding: 15px; border-radius: 12px; font-size: 18px; font-weight: bold; cursor: pointer; border: none;">
            ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹
        </button>
    </div>

    <script>
        // ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿
        const quizData = [
            {
                id: 1,
                question: 'åœ°éœ‡ç™ºç”Ÿæ™‚ã€å®¶ã®ä¸­ã§æœ€åˆã«ã¨ã‚‹ã¹ãè¡Œå‹•ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã‚‚ã®ã¯ä½•ã§ã™ã‹ï¼Ÿ',
                options: [
                    { text: 'ã™ãã«ãƒ‰ã‚¢ã‚’é–‹ã‘ã¦å¤–ã¸é¿é›£ã™ã‚‹ã€‚', isCorrect: false, rationale: 'æºã‚ŒãŒåã¾ã‚‹å‰ã«å¤–ã«å‡ºã‚ˆã†ã¨ã™ã‚‹ã¨ã€è½ä¸‹ç‰©ã‚„å€’å£Šã«å·»ãè¾¼ã¾ã‚Œã‚‹å±é™ºãŒã‚ã‚Šã¾ã™ã€‚' },
                    { text: 'ç«ã®å§‹æœ«ã‚’ã™ã‚‹ãŸã‚ã€ã‚³ãƒ³ãƒ­ã®ç«ã‚’æ¶ˆã—ã«è¡Œãã€‚', isCorrect: false, rationale: 'æ¿€ã—ã„æºã‚Œã®æœ€ä¸­ã«ç«ã‚’æ¶ˆã—ã«è¡Œãã¨ã€è»¢å€’ã—ã¦è² å‚·ã™ã‚‹å±é™ºãŒé«˜ã„ãŸã‚ã€ã¾ãšã¯èº«ã®å®‰å…¨ã‚’ç¢ºä¿ã—ã¾ã™ã€‚' },
                    { text: 'é ­ã‚’ä¿è­·ã—ã€ä¸ˆå¤«ãªæœºã‚„å®¶å…·ã®ä¸‹ã«èº«ã‚’éš ã™ã€‚', isCorrect: true, rationale: 'åœ°éœ‡ã®æºã‚Œã«ã‚ˆã‚‹è½ä¸‹ç‰©ã‚„å€’å£Šã‹ã‚‰èº«ã‚’å®ˆã‚‹ãŸã‚ã€é ­éƒ¨ã‚’ä¿è­·ã—ã€å®‰å…¨ãªå ´æ‰€ã«é¿é›£ã™ã‚‹ã“ã¨ãŒæœ€å„ªå…ˆã§ã™ã€‚' },
                    { text: 'å®¶æ—å…¨å“¡ã«é›»è©±ã‚’ã‹ã‘ã¦å®‰å¦ã‚’ç¢ºèªã™ã‚‹ã€‚', isCorrect: false, rationale: 'å®‰å¦ç¢ºèªã¯æºã‚ŒãŒåã¾ã£ã¦ã‹ã‚‰è¡Œã†ã¹ãã§ã‚ã‚Šã€æºã‚Œã®æœ€ä¸­ã¯èº«ã®å®‰å…¨ãŒæœ€å„ªå…ˆã§ã™ã€‚' },
                ],
                correctAnswer: 2 // 0, 1, 2, 3 ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
            },
            {
                id: 2,
                question: 'ç½å®³æ™‚ã€ç·Šæ€¥é¿é›£å ´æ‰€ã¸é¿é›£ã™ã‚‹éš›ã«æŒã¡å‡ºã™ã¹ãã€Œéå¸¸æŒã¡å‡ºã—è¢‹ã€ã«å…¥ã‚Œã‚‹ã¹ãã§ã¯ãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    { text: 'æºå¸¯ãƒ©ã‚¸ã‚ªã¨äºˆå‚™ã®é›»æ± ', isCorrect: false, rationale: 'æƒ…å ±åé›†ã®ãŸã‚ã®æºå¸¯ãƒ©ã‚¸ã‚ªã¯é‡è¦ã§ã™ã€‚' },
                    { text: '3æ—¥åˆ†ä»¥ä¸Šã®é£Ÿæ–™ã¨æ°´', isCorrect: false, rationale: 'é£Ÿæ–™ã¨æ°´ã¯æœ€ä½3æ—¥åˆ†ã€å¯èƒ½ã§ã‚ã‚Œã°1é€±é–“åˆ†ã‚’ç”¨æ„ã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚' },
                    { text: 'é«˜ä¾¡ãªå®é£¾å“ã‚„è¶£å‘³ã®é“å…·', isCorrect: true, rationale: 'éå¸¸æŒã¡å‡ºã—è¢‹ã¯ç”Ÿå‘½ç¶­æŒã«å¿…è¦ãªæœ€ä½é™ã®ã‚‚ã®ã«çµã‚‹ã¹ãã§ã‚ã‚Šã€ã‹ã•ã°ã‚‹è¶£å‘³ã®é“å…·ã‚„é«˜ä¾¡ãªå®é£¾å“ã¯å„ªå…ˆåº¦ãŒä½ã„ã§ã™ã€‚' },
                    { text: 'å¸¸å‚™è–¬ã¨æ•‘æ€¥ç”¨å“', isCorrect: false, rationale: 'è–¬ã‚„æ•‘æ€¥ç”¨å“ã¯è² å‚·ã‚„æŒç—…ã®å¯¾å¿œã«ä¸å¯æ¬ ã§ã™ã€‚' },
                ],
                correctAnswer: 2
            },
            {
                id: 3,
                question: 'å¤§é›¨ã‚„æ´ªæ°´è­¦å ±ãŒç™ºè¡¨ã•ã‚ŒãŸéš›ã€é¿é›£æƒ…å ±ã®ä¸­ã§æœ€ã‚‚å±é™ºåº¦ãŒé«˜ã„æƒ…å ±ã¯ä½•ã§ã™ã‹ï¼Ÿ',
                options: [
                    { text: 'è­¦æˆ’ãƒ¬ãƒ™ãƒ«3ï¼ˆé«˜é½¢è€…ç­‰é¿é›£ï¼‰', isCorrect: false, rationale: 'é«˜é½¢è€…ãªã©ã®é¿é›£ã«æ™‚é–“ã®ã‹ã‹ã‚‹äººãŒé¿é›£ã‚’é–‹å§‹ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã™ã€‚' },
                    { text: 'è­¦æˆ’ãƒ¬ãƒ™ãƒ«4ï¼ˆé¿é›£æŒ‡ç¤ºï¼‰', isCorrect: false, rationale: 'å±é™ºãªå ´æ‰€ã‹ã‚‰å…¨å“¡é¿é›£ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã™ã€‚' },
                    { text: 'è­¦æˆ’ãƒ¬ãƒ™ãƒ«5ï¼ˆç·Šæ€¥å®‰å…¨ç¢ºä¿ï¼‰', isCorrect: true, rationale: 'æ—¢ã«ç½å®³ãŒç™ºç”Ÿã€ã¾ãŸã¯åˆ‡è¿«ã—ã¦ãŠã‚Šã€å‘½ã®å±é™ºãŒã‚ã‚‹ãŸã‚ç›´ã¡ã«å®‰å…¨ãªå ´æ‰€ã§èº«ã‚’å®ˆã‚‹æ®µéšã§ã™ã€‚' },
                    { text: 'è­¦æˆ’ãƒ¬ãƒ™ãƒ«1ï¼ˆæ—©æœŸæ³¨æ„æƒ…å ±ï¼‰', isCorrect: false, rationale: 'ç½å®³ç™ºç”Ÿã®å¯èƒ½æ€§ãŒé«˜ã¾ã£ã¦ã„ã‚‹ã“ã¨ã«ç•™æ„ã—ã€é˜²ç½è¡Œå‹•ã‚’ç¢ºèªã™ã‚‹æ®µéšã§ã™ã€‚' },
                ],
                correctAnswer: 2
            }
            // ã‚¯ã‚¤ã‚ºå•é¡Œã‚’ã“ã“ã«è¿½åŠ ...
        ];

        let currentQuestionIndex = 0;
        let userAnswers = new Array(quizData.length).fill(null);
        let score = 0;

        // --- UIãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é–¢æ•° ---

        /**
         * ç¾åœ¨ã®è³ªå•ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹
         */
        function renderQuestion() {
            if (currentQuestionIndex >= quizData.length || currentQuestionIndex < 0) {
                // ã‚¯ã‚¤ã‚ºçµ‚äº†
                showResults();
                return;
            }

            const question = quizData[currentQuestionIndex];
            const container = document.getElementById('questionContainer');
            container.innerHTML = `
                <div class="question-text">
                    Q.${currentQuestionIndex + 1} ${question.question}
                </div>
                <div id="optionsContainer">
                    ${question.options.map((option, index) => `
                        <label class="answer-option ${userAnswers[currentQuestionIndex] === index ? 'selected' : ''}" 
                               onclick="selectAnswer(${index})">
                            ${option.text}
                        </label>
                        <div class="rationale" id="rationale-${index}" style="display:none;">
                            ${option.rationale}
                        </div>
                    `).join('')}
                </div>
            `;

            updateProgress();
            updateNavigationButtons();
            
            // æ—¢ã«å›ç­”æ¸ˆã¿ã®å ´åˆã¯ã€çµæœã‚’è¡¨ç¤º
            if (userAnswers[currentQuestionIndex] !== null) {
                lockOptions(question);
            }
        }
        
        /**
         * é¸æŠã•ã‚ŒãŸå›ç­”ã‚’è¨˜éŒ²ã™ã‚‹
         * @param {number} selectedIndex - é¸æŠã•ã‚ŒãŸå›ç­”ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
         */
        function selectAnswer(selectedIndex) {
            const question = quizData[currentQuestionIndex];
            
            // ã™ã§ã«å›ç­”ãŒãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ä½•ã‚‚ã—ãªã„
            if (userAnswers[currentQuestionIndex] !== null) return;

            // UIã‚’æ›´æ–° (é¸æŠçŠ¶æ…‹ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ)
            const options = document.getElementById('optionsContainer').querySelectorAll('.answer-option');
            options.forEach((option, index) => {
                option.classList.remove('selected');
                if (index === selectedIndex) {
                    option.classList.add('selected');
                }
            });

            // å›ç­”ã‚’ä¸€æ™‚çš„ã«è¨˜éŒ²
            userAnswers[currentQuestionIndex] = selectedIndex;
            document.getElementById('nextBtn').disabled = false;
        }
        
        /**
         * è³ªå•ã®é¸æŠè‚¢ã‚’ãƒ­ãƒƒã‚¯ã—ã€æ­£èª¤ã¨è§£èª¬ã‚’è¡¨ç¤ºã™ã‚‹
         * @param {object} question - ç¾åœ¨ã®è³ªå•ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
         */
        function lockOptions(question) {
            const options = document.getElementById('optionsContainer').querySelectorAll('.answer-option');
            const selectedIndex = userAnswers[currentQuestionIndex];

            options.forEach((option, index) => {
                const rationaleElement = document.getElementById(`rationale-${index}`);
                rationaleElement.style.display = 'block'; // è§£èª¬ã‚’å¸¸ã«è¡¨ç¤º

                option.classList.remove('selected');
                option.style.cursor = 'default'; // ã‚¯ãƒªãƒƒã‚¯ç„¡åŠ¹åŒ–

                if (index === question.correctAnswer) {
                    option.classList.add('correct');
                } else if (index === selectedIndex) {
                    option.classList.add('incorrect');
                }
            });
            document.getElementById('nextBtn').disabled = false;
        }

        // --- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•° ---

        function nextQuestion() {
            if (userAnswers[currentQuestionIndex] === null) {
                alert('å›ç­”ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            // åˆã‚ã¦ã®å›ç­”ã®å ´åˆã¯ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—ãƒ»ãƒ­ãƒƒã‚¯
            if (!document.getElementById('nextBtn').disabled) {
                const question = quizData[currentQuestionIndex];
                if (userAnswers[currentQuestionIndex] === question.correctAnswer) {
                    // ã‚¹ã‚³ã‚¢è¨ˆç®—ã¯çµæœè¡¨ç¤ºæ™‚ã«è¡Œã†ãŸã‚ã€ã“ã“ã§ã¯ãƒ­ãƒƒã‚¯æ“ä½œã®ã¿
                }
                lockOptions(question);
            }

            // æ¬¡ã®è³ªå•ã¸
            currentQuestionIndex++;
            renderQuestion();
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }
        
        function updateNavigationButtons() {
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            const nextBtn = document.getElementById('nextBtn');
            if (currentQuestionIndex === quizData.length - 1) {
                nextBtn.textContent = 'çµæœã‚’è¦‹ã‚‹';
                nextBtn.onclick = showResults;
            } else {
                nextBtn.textContent = 'æ¬¡ã¸ â†’';
                nextBtn.onclick = nextQuestion;
                // åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã€æœªå›ç­”ãªã‚‰Nextã‚’ç„¡åŠ¹åŒ–
                if (userAnswers[currentQuestionIndex] === null) {
                    nextBtn.disabled = true;
                }
            }
        }

        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / quizData.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            document.getElementById('totalQuestions').textContent = quizData.length;
        }

        // --- çµæœè¡¨ç¤ºé–¢æ•° ---
        
        function calculateScore() {
            score = 0;
            for (let i = 0; i < quizData.length; i++) {
                if (userAnswers[i] === quizData[i].correctAnswer) {
                    score++;
                }
            }
            return score;
        }

        function showResults() {
            calculateScore();
            
            document.getElementById('quizScreen').style.display = 'none';
            document.getElementById('resultsScreen').style.display = 'block';
            
            document.getElementById('scoreDisplay').textContent = `${score} / ${quizData.length}`;
            
            let message = '';
            const percentage = (score / quizData.length) * 100;
            
            if (percentage === 100) {
                message = 'ğŸ‰ æº€ç‚¹ã§ã™ï¼é˜²ç½çŸ¥è­˜ã¯å®Œç’§ã§ã™ã€‚';
            } else if (percentage >= 70) {
                message = 'ğŸ‘ ç´ æ™´ã‚‰ã—ã„ï¼åŸºæœ¬çš„ãªé˜²ç½çŸ¥è­˜ã¯èº«ã«ã¤ã„ã¦ã„ã¾ã™ã€‚';
            } else if (percentage >= 40) {
                message = 'ğŸ™‚ ã‚ã¨ä¸€æ­©ï¼é–“é•ã„ã‚’å¾©ç¿’ã—ã¦çŸ¥è­˜ã‚’æ·±ã‚ã¾ã—ã‚‡ã†ã€‚';
            } else {
                message = 'ğŸ˜¥ é ‘å¼µã‚Šã¾ã—ã‚‡ã†ã€‚é‡è¦ãªçŸ¥è­˜ãŒä¸è¶³ã—ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚';
            }
            document.getElementById('resultMessage').textContent = message;
        }
        
        function restartQuiz() {
            currentQuestionIndex = 0;
            userAnswers.fill(null);
            score = 0;
            
            document.getElementById('quizScreen').style.display = 'block';
            document.getElementById('resultsScreen').style.display = 'none';
            
            renderQuestion();
        }

        function goBack() {
            window.location.href = 'index.html'; // index.htmlã«æˆ»ã‚‹ã“ã¨ã‚’æƒ³å®š
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å®Ÿè¡Œ
        window.addEventListener('load', function() {
            document.getElementById('totalQuestions').textContent = quizData.length;
            renderQuestion();
        });
    </script>
</body>
</html>